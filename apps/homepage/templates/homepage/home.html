{% extends "base.html" %}
{% load i18n %}

{% block head-title %}{% trans "Kallisto powering Spacelog" %}{% endblock %}
{% block body-class %}home{% endblock %}

{% block content %}
{% if mission %}
<h1>
  {% blocktrans with name=mission.name %}<b>We are working on </b>{{ name }}{% endblocktrans %}
  <img src='{{ mission.patch.url }}' width='{{ mission.patch_width }}' height='{{ mission.patch_height }}' alt='{% blocktrans with start=mission.start end=mission.end %}from {{ start }} to {{ end }}{% endblocktrans %}'>
</h1>
<p class='status'>Together we've cleaned {{ mission.approved_pages.count }} out of {{ mission.pages.count }} pages of this mission.</p>

{% if request.user.is_authenticated %}
<p><a class='proceed' href='{% url "mission-clean-next" slug=mission.short_name %}'>{% trans "Start cleaning" %}</a></p>
{% else %}
<p><a class='proceed' href='{% url "register" %}'>{% trans "Register to start cleaning" %}</a></p>
{% endif %}

{% else %}
<h1>{% trans "We're not working on any missions right now." %}</h1>
{% endif %}

<div class='leaderboards'>
<h1>Leaderboards</h1>

<section class='leaderboard'>
  <h2>Recently</h2>

  <ol>
    {% for user in leaderboard_recent %}
    <li>{{ user.name }}: {{ user.pages_cleaned|add:user.pages_approved }} cleaned.</li>
    {% endfor %}
  </ol>
</section>

<section class='leaderboard'>
  <h2>All time</h2>

  <ol>
    {% for user in leaderboard_overall %}
    <li>{{ user.name }}: {{ user.pages_cleaned|add:user.pages_approved }} cleaned.</li>
    {% endfor %}
  </ol>
</section>
</div>
{% endblock %}
